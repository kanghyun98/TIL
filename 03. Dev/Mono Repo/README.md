# Mono Repo

모노레포 이론 및 실습 정리를 위한 공간입니다.

<br>

## 모노 레포란

: 버전 관리 시스템에서 두 개 이상의 프로젝트 코드가 동일한 저장소에 저장되는 소프트웨어 개발 전략

(예를 들어, [당근마켓 stackflow](https://github.com/daangn/stackflow))

<img src="https://user-images.githubusercontent.com/70627979/218266759-f0379ced-c6a0-4a68-9114-8f7a5cba2198.png" alt="image" style="zoom: 70%;" />

<br>

## 왜 필요할까?

분리된 각 모듈을 고유한 저장소가 있는 독자적인 프로젝트로 관리하는 **멀티레포 구조**의 문제점을 해결하기 위해 나타났다.

멀티레포는 자율성이 높으며 독립적인 개발, 린트, 테스트, 빌드, 게시, 배포 파이프라인이 존재한다. 이러한 특성으로 인해 멀티레포는 아래와 같은 문제점들이 발생할 수 있다.

- 번거로운 프로젝트 생성
  - 새로운 공유 패키지 생성 시, 매번 [저장소 생성 → 커미터 추가 → 개발 환경 구축 → CI/CD 구축 → 빌드 → 패키지 저장소에 publish]의 과정을 거쳐야 한다.
- 패키지의 중복 코드 가능성
- 관리 포인트 증가
- 일관성 없는 개발자 경험(DX)
- 다른 패키지의 변경 사항 파악

<br>

그래서 모노레포는 여전히 독자적인 프로젝트로 존재하지만 같은 저장소를 사용하여 보다 쉬운 프로젝트 생성, 의존성 관리, 일관된 개발자 경험 등을 제공하여 멀티레포의 문제점을 해결한다.

<br>

### 모노레포가 항상 옳을까?

아니다. 멀티레포와 모노레포의 장단점이 교차되기 때문에 적절한 상황에 맞게 사용해야 한다.

<br>

모노레포가 적절한 상황은 아래와 같다. ([Naver D2 글 참고](https://d2.naver.com/helloworld/0923884))

- 유사한 제품의 집합
- 여러 프로젝트의 변화를 한눈에 파악해야 할 때
- 호스트 애플리케이션을 플러그인 등으로 확장할 때
- 공통 기능을 재사용하는 관련된 프로젝트의 집합
- 유사한 DevOps로 구성된 프로젝트의 집합

<br>

## 모노레포 구축 도구

Learna, Yarn workspace, npm workspace, pnpm, Nx 등 많은 도구들이 모노레포 구축에 사용된다.

<br>

### **패키지 매니저**와 **모노레포 빌드 시스템 도구 방식**

- 관리: 모노레포 빌드 시스템 도구는 workspace가 점차 성장하고 확장됨에 따라 늘어나는 관리 포인트를 손쉽게 해결해주는 역할을 한다.
- 속도: 변경점에 영향을 받는 프로젝트 빌드 테스트만 실행할 수 있다.
- 분석: 별다른 구성없이 workspace 또는 프로젝트간의 의존성 그래프를 쉽게 확인 할 수 있게 해준다.

<br>

## 참고 자료

- https://d2.naver.com/helloworld/0923884
- https://en.wikipedia.org/wiki/Monorepo